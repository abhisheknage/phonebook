(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n.n(r),a=n(3),s=n.n(a),o=n(5),u=n(4),i=n(6),l=n.n(i),d=n(1),f=n(0),b=function(e){var t=e.search,n=e.setSearch;return Object(f.jsxs)("div",{children:["Filter shown with"," ",Object(f.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})},j=function(e){var t=e.message;return null===t?null:Object(f.jsxs)("div",{className:"message message--success",children:[t,Object(f.jsx)("br",{})]})},h=function(e){var t=e.message;return null===t?null:Object(f.jsx)("div",{className:"message message--error",children:t})},m=function(e){var t=e.addName,n=e.newName,r=e.setNewName,c=e.newNumber,a=e.setNewNumber;return Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["name:"," ",Object(f.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number:"," ",Object(f.jsx)("input",{value:c,onChange:function(e){return a(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},p="http://localhost:3001/api/persons",O=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.a.post(p,t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.delete("".concat(p,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.put("".concat(p,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w={getAll:function(){return l.a.get(p).then((function(e){return e.data}))},createContact:O,deleteContact:v,updateContact:g},x=function(e){var t=e.person,n=e.persons,r=e.setPersons,c=e.setErrorMessage;return Object(f.jsxs)("div",{children:[t.name," ",t.number," ",Object(f.jsx)("button",{id:t.id,onClick:function(){window.confirm("Are you sure you want to delete ".concat(t.name,"'s contact info?"))&&(console.log(t.id),w.deleteContact(t.id).then((function(e){console.log(e),r(n.filter((function(e){return e.id!==t.id})))})).catch((function(e){c("Information of ".concat(t.name," has already been removed from server")),setTimeout((function(){return c(null)}),5e3)})))},children:"delete"})]})},N=function(e){var t=e.persons,n=e.search,r=e.setPersons,c=e.setErrorMessage;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(f.jsx)(x,{person:e,setPersons:r,persons:t,setErrorMessage:c})}))},y=function(){var e=Object(d.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(d.useState)(""),a=Object(u.a)(c,2),i=a[0],l=a[1],p=Object(d.useState)(""),O=Object(u.a)(p,2),v=O[0],g=O[1],x=Object(d.useState)(""),y=Object(u.a)(x,2),C=y[0],k=y[1],S=Object(d.useState)(null),E=Object(u.a)(S,2),P=E[0],T=E[1],A=Object(d.useState)(null),M=Object(u.a)(A,2),I=M[0],D=M[1],J=function(){var e=Object(o.a)(s.a.mark((function e(t){var c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("This event is ",t),console.log(n.filter((function(e){return e.name===i}))),n.some((function(e){return e.name===i}))?(console.log(i),window.confirm("".concat(i," is already added to phonebook. Do you want to update their phone number?"))&&(c=n.find((function(e){return e.name===i})).id,w.updateContact(c,{name:i,number:v}).then((function(e){console.log("Updating front end",e),r(n.filter((function(t){return t.id!=e.id})).concat(e)),console.log("After updating front end, this is what I have locally stored",n),T("Successfully updated ".concat(e.name)),setTimeout((function(){T(null)}),5e3)})))):(a={name:i,number:v},w.createContact(a).then((function(e){console.log("creating contact successfully has returned the following data",e),r(n.concat(e)),T("Successfully added ".concat(e.name)),setTimeout((function(){T(null)}),5e3),l(""),g("")})).catch((function(e){console.log("error is ",e);var t=e.response.data;console.log(t),D(e.response.data),setTimeout((function(){return D(null)}),5e3)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.useEffect)((function(){w.getAll().then((function(e){r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(j,{message:P}),Object(f.jsx)(h,{message:I}),Object(f.jsx)(b,{search:C,setSearch:k}),Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsx)(m,{addName:J,newName:i,setNewName:l,newNumber:v,setNewNumber:g}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(N,{persons:n,search:C,setPersons:r,setErrorMessage:D})]})};n(43);c.a.render(Object(f.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e5325a41.chunk.js.map